<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, width=device-width">
    <title>Jenkins and AWS</title>

    <!-- CSS -->
    <link rel="stylesheet" href="../css/styles.css">

    <!-- Google Fonts: Montserrat and Ubuntu. Currently not used.-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Sacramento&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap"
        rel="stylesheet">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">


    <!-- Font awesome -->
    <script src="https://kit.fontawesome.com/181c7bc6bd.js" crossorigin="anonymous"></script>


    <!-- Javascript -->
    <script src="../index.js" charset="utf-8"></script>

</head>



<body>


    <section id="nav">
        <!-- <div class="container-fluid"> -->
        <nav class="navbar navbar-expand-lg navbar-dark">

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <!-- AddToAny BEGIN -->
            <div class="a2a_kit a2a_kit_size_32 a2a_default_style" style="float: left; margin-left: 20px;">
                <!-- <a class="a2a_dd" href="https://www.addtoany.com/share"></a> -->
                <a class="a2a_button_linkedin"></a>
                <a class="a2a_button_facebook"></a>
                <a class="a2a_button_whatsapp"></a>
                <a class="a2a_button_twitter"></a>
                <a class="a2a_button_email"></a>
                <a class="a2a_button_google_gmail"></a>
            </div>
            <script async src="https://static.addtoany.com/menu/page.js"></script>
            <!-- AddToAny END -->

            <!-- Links at top right will collapse -->
            <div class="collapse navbar-collapse" id="navbarSupportedContent">

                <ul class="navbar-nav ms-auto">

                    <li class="nav-item">
                        <a class="nav-link" href="../index.html">Home</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#projects">Projects</a>
                    </li>

                    <li class="nav-item">
                        <a href="../index.html#contact" class="nav-link">Contact</a>
                    </li>


                    <li class="nav-item">
                        <a class="nav-link" href="../index.html#blog">Blog</a>
                    </li>

                </ul>
            </div>
        </nav>

        <!-- </div> -->
    </section>

    <section>
        <div class="container-fluid">
            <div class="row">


                <div class="col-lg-12">


                    <h1 style="text-align:center" class="intro-padding">CI/CD Pipeline with Jenkins and AWS</h1>

                </div>
            </div>
        </div>

    </section>


    <section>
        <div class="container-fluid">
            <div class="row">


                <div style="margin:0 auto;" class="col-md-12">

                    <section id="slides">

                        <div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-ride="carousel">
                            <div class="carousel-indicators">
                                <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0"
                                    class="active" aria-current="true" aria-label="Slide 1"></button>
                                <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1"
                                    aria-label="Slide 2"></button>
                                <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2"
                                    aria-label="Slide 3"></button>
                                <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="3"
                                    aria-label="Slide 4">
                                </button>
                                <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="4"
                                    aria-label="Slide 5">
                                </button>

                            </div>

                            <div class="carousel-inner" role="listbox">
                                <div class="carousel-item active" data-bs-interval="3000">
                                    <img src="../Images/jenkins-advanced/jenkins-advanced.webp  " class="carousel-image"
                                        alt="homepage">

                                    <br />

                                    <!-- </div> -->
                                </div>
                                <div class="carousel-item" data-bs-interval="3000">
                                    <img src="../Images/jenkins-advanced/buildstages.webp" class="carousel-image"
                                        alt="homepage">
                                    <br />

                                    <!-- </div> -->
                                </div>

                                <div class="carousel-item" data-bs-interval="3000">

                                    <img src="../Images/jenkins-advanced/love_calc.webp" class="carousel-image"
                                        alt="homepage">
                                </div>


                                <div class="carousel-item" data-bs-interval="3000">

                                    <img src="../Images/jenkins-advanced/aws_beanstalk.webp" class="carousel-image"
                                        alt="homepage">
                                </div>

                                <div class="carousel-item" data-bs-interval="3000">

                                    <img src="../Images/jenkins-advanced/ecr_images.webp" class="carousel-image"
                                        alt="homepage">
                                </div>



                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark"
                                data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark"
                                data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                    </section>

                </div>
            </div>
        </div>

    </section><br>

    <h6>
        Project codes are available at <a class="one" href="https://github.com/nchinling/jenkins-advance-features"
            target="_blank">
            Github <i class="contact-img fa-brands fa-github"></i></a>
    </h6>

    <p>This project showcases a Jenkins pipeline that automates the deployment of a web application (love calculator) to
        AWS. The Jenkins
        pipeline implements advanced Jenkins features such as:
    <ul class="clist">
        <li>multi-branch pipelines</li>
        <li>boolean parameter</li>
        <li>junit report</li>
        <li>input for manual intervention</li>
        <li>fingerprinting</li>
        <li>archival of artifacts</li>
        <li>email notification</li>
    </ul>
    </p>

    <p>
        In addition to building the application, the CI/CD pipeline creates a Docker container, which is first uploaded
        to Docker Hub and subsequently pushed to AWS Elastic Container Registry (ECR). The containerised application is
        then deployed to AWS Elastic Beanstalk for production use. This setup showcases a complete CI/CD pipeline,
        starting from code integration, automated testing, Docker image creation, and deployment to production. By
        leveraging Jenkins for automation and AWS for scalable deployment, this project demonstrates end-to-end delivery
        of web applications, ensuring efficient and reliable application releases.
    </p><br>
    <h6>
        Jenkinsfile configuration (Declarative Pipeline)
    </h6>

    <p>The Jenkins job is configured with the following features:</p>
    <p><u>Build trigger, Maven build, unit tests, static code analysis, containerisation and email notification</u></p>

    <p>These features are similar to the implementations in the previous <a
            href="https://ngchinling.com/projects/jenkins.html">Jenkins pipeline project</a>.</p>

    <p><u>Multi-branch pipelines</u></p>
    <p>Multi-branch pipelines are used to automatically create a pipeline for each branch in the repository,
        enabling each branch to have different CI/CD pipeline configurations. For this to work, the
        'Multi-Branch Pipeline Job' has to be selected in Jenkins UI and each feature branch will need to have
        its own Jenkinsfile.
    </p>

    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <figure style="text-align: center;">
                    <img src="../Images/jenkins-advanced/multibranches_ui.webp" alt="multi_pipelines" width="600"
                        height="auto">
                    <figcaption>Multi-branch pipelines</figcaption>
                </figure>
            </div>
        </div>
    </div></br>
    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <figure style="text-align: center;">
                    <img src="../Images/jenkins-advanced/multibranches.webp" alt="multi_pipelines" width="600"
                        height="auto">
                    <figcaption>Multi-branch pipelines in terminal</figcaption>
                </figure>
            </div>
        </div>
    </div></br>

    <p><u>Boolean parameter</u></p>
    <p>A boolean parameter is a type of build parameter that allows the user to include a simple checkbox in the build
        configuration.The pipeline uses a boolean parameter which determines whether the application should be
        containerised
        and deployed to Docker Hub. The default value is set to True so that the build will be automatically
        containerised whenever there is a code change in the repository. The boolean parameter is defined in a
        parameters block. It is then conditionally
        executed based on the boolean value passed.
    </p>

    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <figure style="text-align: center;">
                    <img src="../Images/jenkins-advanced/buildparamUI.webp" alt="multi_pipelines" width="600"
                        height="auto">
                    <figcaption>Boolean checkbox</figcaption>
                </figure>
            </div>
        </div>
    </div></br>


    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <figure style="text-align: center;">
                    <img src="../Images/jenkins-advanced/booleanparamcode.webp" alt="multi_pipelines" width="600"
                        height="auto">
                    <figcaption>Parameters block</figcaption>
                </figure>
            </div>
        </div>
    </div></br>
    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <figure style="text-align: center;">
                    <img src="../Images/jenkins-advanced/booleanparamcode2.webp" alt="multi_pipelines" width="600"
                        height="auto">
                    <figcaption>Conditional execution (When)</figcaption>
                </figure>
            </div>
        </div>
    </div></br>

    <p><u>JUnit report</u></p>
    <p>The 'junit' pipeline step processes the JUnit test result files and displays the unit tests results in
        Jenkins. The code used below informs Jenkins to use the provided path pattern to locate the
        JUnit XML files generated by the tests.
    </p>
    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <figure style="text-align: center;">
                    <img src="../Images/jenkins-advanced/junit.webp" alt="junit code snippet" width="600" height="auto">
                    <figcaption>junit code snippet</figcaption>
                </figure>
            </div>
        </div>
    </div></br>
    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <figure style="text-align: center;">
                    <img src="../Images/jenkins-advanced/junit_test_result_ui.webp" alt="test results" width="600"
                        height="auto">
                    <figcaption>Unit test results</figcaption>
                </figure>
            </div>
        </div>
    </div></br>

    <p><u>Input for manual intervention</u></p>
    <p>The input step is pauses the pipeline and waits for user input (manual intervention) before continuing with
        the execution of the job. The input step used in the pipeline waits for user input in deciding whether to
        approve a deployment to production. If not approved, it proceeds straight to the post stage to email the
        results of job build.</p>

    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <figure style="text-align: center;">
                    <img src="../Images/jenkins-advanced/input_code.webp" alt="junit code snippet" width="600"
                        height="auto">
                    <figcaption>Input code snippet</figcaption>
                </figure>
            </div>
        </div>
    </div></br>

    <p><u>Archiving and Fingerprinting</u></p>
    <p>Archiving saves the build artifacts generated by the build, making them available for download. The archive is
        stored in the build workspace. It stores
        things like build logs, JAR files, WAR files and reports. Meanwhile, fingerprinting tracks the usage of
        files (artifacts) across different jobs or builds. A hash (md5 checksum fingerprint) is created for each
        file which tracks which build the the file was first created and usage across jobs if any.</p>

    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <figure style="text-align: center;">
                    <img src="../Images/jenkins-advanced/jenkinsworkspace.webp" alt="junit code snippet" width="600"
                        height="auto">
                    <figcaption>Build workspace</figcaption>
                </figure>
            </div>
        </div>
    </div></br>
    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <figure style="text-align: center;">
                    <img src="../Images/jenkins-advanced/archive_and_fingerprint_code.webp" alt="junit code snippet"
                        width="600" height="auto">
                    <figcaption>Archiving and fingerprinting code snippet</figcaption>
                </figure>
            </div>
        </div>
    </div></br>
    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <figure style="text-align: center;">
                    <img src="../Images/jenkins-advanced/fingerprint_and_artifact.webp" alt="test results" width="600"
                        height="auto">
                    <figcaption>Archived artifact and fingerprint</figcaption>
                </figure>
            </div>
        </div>
    </div></br>


    <p><u>Deployment to AWS</u></p>


    <p>
        The deployment to AWS involves a series of setup in the AWS Management Console and code snippet in the
        Jenkinsfile. This Medium <a
            href="https://medium.com/@prabhnoorsingh22/setting-up-a-ci-cd-pipeline-with-jenkins-deploying-a-docker-application-to-elastic-beanstalk-via-3c5c679153a6"
            target="_blank">article</a>
        provides a good tutorial on deploying the build to AWS.
    </p>
    <p>
    <ol class="clist" type="a">
        <li>Containerise the build</li>
        <p>Containerise the build using Docker. The Docker build instructions are stored in a Dockerfile.</p>



        <li>Push the image to AWS Elastic Container Registry (ECR)</li>
        <p>The image is pushed to ECR. A repository needs to be created first in ECR before the push can happen. In the
            code snippet, user first logs in to ECR and then pushes the build to ECR.</p>
        <div class="container">

            <div class="row">
                <div class="col-lg-12">
                    <figure style="text-align: center;">
                        <img src="../Images/jenkins-advanced/ecr_code.webp" alt="test results" width="800"
                            height="auto">
                        <figcaption>Log in and push to ECR</figcaption>
                    </figure>
                </div>
            </div>
        </div></br>


        <li>Create a Dockerrun.aws.json file</li>
        <p>Create a Dockerrun.aws.json file at the root of the repository. It is used by AWS Elastic Beanstalk to
            configure and deploy Docker-based applications. It contains the configuration details needed for Elastic
            Beanstalk to run the application inside Docker containers. AWSEBDockerrunVersion specifies the version of
            the Dockerrun file format. '1' is for single-container Docker environments. The image name specifies the
            Docker image to be used from ECR. The "Update": "true" tag specifies that whenever a new version of the
            image
            is pushed to
            ECR, Elastic Beanstalk will use the latest version for deployment. Finally, ContainerPort:8080 means the
            container is exposing port 8080, allowing the application inside the Docker container to be accessible
            through this port. The file is zipped to be deployed to ECR.</p>
        <div class="container">

            <div class="row">
                <div class="col-lg-12">
                    <figure style="text-align: center;">
                        <img src="../Images/jenkins-advanced/dockerrun_code.webp" alt="test results" width="800"
                            height="auto">
                        <figcaption>Dockerrun.aws.json </figcaption>
                    </figure>
                </div>
            </div>
        </div></br>
        <div class="container">

            <div class="row">
                <div class="col-lg-12">
                    <figure style="text-align: center;">
                        <img src="../Images/jenkins-advanced/zip_code.webp" alt="ELB" width="800" height="auto">
                        <figcaption>Zip the build</figcaption>
                    </figure>
                </div>
            </div>
        </div></br>
        <div class="container">

            <div class="row">
                <div class="col-lg-12">
                    <figure style="text-align: center;">
                        <img src="../Images/jenkins-advanced/ecr.webp" alt="test results" width="800" height="auto">
                        <figcaption>ECR repository</figcaption>
                    </figure>
                </div>
            </div>
        </div></br>
        <div class="container">

            <div class="row">
                <div class="col-lg-12">
                    <figure style="text-align: center;">
                        <img src="../Images/jenkins-advanced/ecr_images.webp" alt="test results" width="800"
                            height="auto">
                        <figcaption>ECR images</figcaption>
                    </figure>
                </div>
            </div>
        </div></br>




        <li>Elastic Beanstalk</li>
        <p>AWS Elastic Beanstalk is a Platform as a Service (PaaS) offered by AWS that simplifies
            the deployment and management of web applications and services.</p>
        <div class="container">

            <div class="row">
                <div class="col-lg-12">
                    <figure style="text-align: center;">
                        <img src="../Images/jenkins-advanced/ebeancode.webp" alt="test results" width="800"
                            height="auto">
                        <figcaption>AWS Elastic Beanstalk code snippet</figcaption>
                    </figure>
                </div>
            </div>
        </div></br>
        <div class="container">

            <div class="row">
                <div class="col-lg-12">
                    <figure style="text-align: center;">
                        <img src="../Images/jenkins-advanced/aws_beanstalk.webp" alt="ELB" width="800" height="auto">
                        <figcaption>Environment</figcaption>
                    </figure>
                </div>
            </div>
        </div></br>
        <div class="container">

            <div class="row">
                <div class="col-lg-12">
                    <figure style="text-align: center;">
                        <img src="../Images/jenkins-advanced/env.webp" alt="ELB" width="800" height="auto">
                        <figcaption>Event log in AWS Elastic Beanstalk</figcaption>
                    </figure>
                </div>
            </div>
        </div></br>




    </ol><br>
    <p><u>Application</u></p>
    <p>
        Once Elastic Beanstalk completes the deployment, the application will be fully configured and automatically
        accessible online, allowing users to interact with it immediately.
    </p>
    <div class="container">

        <div class="row">
            <div class="col-lg-12">
                <figure style="text-align: center;">
                    <img src="../Images/jenkins-advanced/love_calc.webp" alt="ELB" width="800" height="auto">
                    <figcaption>Love calculator web application</figcaption>
                </figure>
            </div>
        </div>
    </div></br>

    <p>

    <p>The following video demonstrates the implementation and execution of the Jenkins pipeline.</p><br>



    <div class="container">
        <div align="center">
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/-ObMFdBJlFE" title="YouTube video player" frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                    allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <br />
    <hr>


    <section id=footer>
        <table>

            <tr>
                <td>

                    <a class="footer-style" href="../index.html"> Home</a>

                </td>
                <td>

                    <a class="footer-style" href="../index.html#projects"> Projects</a>

                </td>

                <td>

                    <a class="footer-style" href="../index.html#blog"> Blog</a>

                </td>
            </tr>

        </table><br>

    </section>

    <!-- Bootstrap - Javascript -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"
        integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk"
        crossorigin="anonymous"></script>


</body>

</html>